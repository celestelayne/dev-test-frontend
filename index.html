<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		 <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Document</title>

		<!-- BOOTSTRAP STYLE -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" integrity="sha512-dTfge/zgoMYpP7QbHy4gWMEGsbsdZeCXz7irItjcC3sPUFtf0kuFbDz/ixG7ArTxmDjLXDmezHubeNikyKGVyQ==" crossorigin="anonymous">

		<!-- APPLICATION STYLESHEETS -->
		<link rel="stylesheet" href="styles.css">

	</head>
	<body >

		<div id="content" class="container-fluid">

			<table id="output" class="table table-striped">
					<!-- HANDLEBARS TEMPLATE -->
					<script id="article-template" type="text/x-handlebars-template">
							{{! comment}} 
							<thead>
								<tr>
									<th>Unpublished Articles</th>
									<th></th>
									<th>Author</th>
									<th>Words</th>
									<th>Submitted</th>
								</tr>
							</thead>

							<tbody>
							{{#limit articles 10}} 
								<tr class="articleRow">
									<td class="thumb">
										<span><img src="{{image}}" /></span>
									</td>
									<td>{{title}}</td>
									{{#with profile}}
									<td>{{first_name}} {{last_name}}</td>
									{{/with }}
									<td>{{words}}</td>
									<td>{{publish_at}}</td>
								</tr>
							{{/limit}}
							</tbody>
						
					</script>

			</table>
			
			<button id="load-more" type="button" class="btn btn-primary btn-lg btn-block">Load More</button>

		</div>

		<!-- JQUERY CDN -->
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0-alpha1/jquery.min.js"></script>

		<!-- Latest compiled and minified JavaScript -->
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js" integrity="sha512-K1qjQ+NcF2TYO/eI3M6v8EiNYZfA95pQumfvcVrTHtwQVDG+aHRqLi/ETn2uB+1JqwYqVG3LIvdm9lj6imS/pQ==" crossorigin="anonymous"></script>

		<!-- HANDLEBARS CDN -->
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.4/handlebars.min.js"></script>

		<!-- APPLICATION SCRIPT -->
		<script type="text/javascript" src="script.js"></script>

		<script id="article-template" type="text/javascript">
				$(document).ready(function(){
						// Grab contents of template
						var source = $('#article-template').html();
						// Compile that into a handlebars template
						var template = Handlebars.compile(source);

						// Get data
						$.getJSON('https://api.myjson.com/bins/4ivfh', function(articles){
								console.log('Articles data loaded!!');
								$('#output').html(template(articles));
						});

						// add times block helper
						Handlebars.registerHelper('limit', function(articles, n, options){
							var ret = '';
							for(var i = 0; i < n; i++) {
								ret = ret + options.fn(articles[i]);
							}
							return ret;
							
						});
					});
									
		</script>


	</body>
</html>